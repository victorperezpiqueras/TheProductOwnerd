<div class="container" fxLayout="column" fxLayoutGap="2%">
  <app-loader class="loader" [isLoading]="isLoading"></app-loader>

  <mat-card class="account-card" fxFlex="20">
    <h1>
      <mat-card-title class="title">Edit Account</mat-card-title>
    </h1>
  </mat-card>
  <mat-card class="account-card" fxFlex="80" *ngIf="usuario">
    <h1 class="mat-h2">General Information</h1>
    <div fxLayout="row" fxLayoutGap="2%">
      <mat-form-field class="title form" appearance="outline">
        <mat-label>Nick</mat-label>
        <input matInput placeholder="Nick" [(ngModel)]="usuario.nick" maxlength="20" />
      </mat-form-field>
      <mat-form-field class="title form" appearance="outline">
        <mat-label>Email</mat-label>
        <input matInput placeholder="Email" [(ngModel)]="usuario.email" />
      </mat-form-field>
    </div>
    <hr />
    <br />
    <h1 class="mat-h2">Personal Data</h1>

    <div fxLayout="row" fxLayoutGap="2%">
      <mat-form-field class="title form" appearance="outline">
        <mat-label>Name</mat-label>
        <input matInput placeholder="Name" [(ngModel)]="usuario.nombre" maxlength="20" />
      </mat-form-field>
    </div>
    <div fxLayout="row" fxLayoutGap="2%">
      <mat-form-field class="title form" appearance="outline">
        <mat-label>First Surname</mat-label>
        <input matInput placeholder="Surname" [(ngModel)]="usuario.apellido1" maxlength="30" />
      </mat-form-field>

      <mat-form-field class="title form" appearance="outline">
        <mat-label>Second Surname</mat-label>
        <input matInput placeholder="Surname" [(ngModel)]="usuario.apellido2" maxlength="30" />
      </mat-form-field>
    </div>
    <hr />
    <br />
    <h1 class="mat-h2">Change Password</h1>
    <form [formGroup]="myForm" fxLayout="row" fxLayoutGap="2%">
      <mat-form-field class="title form" appearance="outline">
        <mat-label>Password</mat-label>
        <input matInput type="password" placeholder="Password" minlength="8" formControlName="password" />
        <mat-error *ngIf="errorLength('password')">
          The password must be of minimum length 8 characters
        </mat-error>
        <!-- <mat-error *ngIf="myForm.hasError('notSame')">
          Passwords do not match
        </mat-error> -->
        <!--  <mat-error *ngIf="errorSame()">
          Passwords do not match
        </mat-error> -->
      </mat-form-field>

      <mat-form-field class="title form" appearance="outline">
        <mat-label>Repeat Password</mat-label>
        <input matInput type="password" placeholder="Repeat Password" minlength="8" formControlName="confirmPassword" />
        <mat-error *ngIf="errorLength('confirmPassword')">
          The password must be of minimum length 8 characters
        </mat-error>
        <!-- <mat-error *ngIf="myForm.hasError('notSame')">
          Passwords do not match
        </mat-error> -->
        <!--  <mat-error *ngIf="errorSame()">
          Passwords do not match
        </mat-error> -->
      </mat-form-field>
      <mat-error *ngIf="errorSame()">
        Passwords do not match
      </mat-error>
    </form>

    <br />
    <button
      mat-raised-button
      (click)="actualizarUsuario()"
      color="primary"
      style="float: right; width: 10vmin;height:6vmin; margin-right: 20px;margin-bottom: 20px;font-size: 2vmin;"
      [disabled]="!checkPasswordOk()"
    >
      Save
    </button>
  </mat-card>
</div>
